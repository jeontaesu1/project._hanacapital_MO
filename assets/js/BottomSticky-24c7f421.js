import{_ as N,u as z,o as _}from"./index-6ca75e4f.js";import{w as b,r as x,a as p,c as O,o as j,j as H,b as I,e as U,f as V,g as h,h as M,i as S,n as f}from"./vendor-7bef1eed.js";const E=()=>({wrap:"",contents:"",fake:""}),P={props:{classNames:{Type:Object,default(){return E()}}},setup(l){const e=b("pageContents",{}),o={ui:{common:z(),scrollBlock:_()}},t=x({isSticky:!1,marginTop:"0",marginBottom:"0",height:"0"}),d=p(null),a=p(null),B=p(null),C=O(()=>{const{classNames:s}=l;return Object.assign(E(),s)}),L=()=>{const y=a.value.children[0],r=getComputedStyle(y),c=r.getPropertyValue("margin-top"),m=r.getPropertyValue("margin-bottom");t.marginTop=c,t.marginBottom=m},n=()=>{const s=d.value;if(s.offsetHeight<=0)return;const r=a.value.children[0],c=(()=>o.ui.scrollBlock.isBlocking?o.ui.scrollBlock.scrollTop:document.getElementsByTagName("html")[0].scrollTop)(),m=c+s.getBoundingClientRect().top,v=r.offsetHeight,T=window.innerHeight;if(o.ui.common.keypadOpened||c>=m+v-T){t.isSticky&&(t.isSticky=!1);return}t.height=`${v}px`,t.isSticky||(t.isSticky=!0)},u=()=>{n()},i=()=>{n()},w=()=>{n()},k=()=>{n()},g=()=>{n()};return j(()=>{L(),H(()=>{n()}),window.addEventListener("load",w),window.addEventListener("scroll",u),window.addEventListener("resize",i),window.addEventListener("keypadOpened",k),window.addEventListener("keypadClosed",g),e.wrap&&e.wrap.value&&e.wrap.value.addEventListener("resize",i)}),I(()=>{window.removeEventListener("load",w),window.removeEventListener("scroll",u),window.removeEventListener("resize",i),window.removeEventListener("keypadOpened",k),window.removeEventListener("keypadClosed",g),e.wrap&&e.wrap.value&&e.wrap.value.removeEventListener("resize",i)}),{state:t,wrap:d,contents:a,fake:B,customClassNames:C}}};function R(l,e,o,t,d,a){return U(),V("div",{ref:"wrap",class:f(t.customClassNames.wrap)},[h("div",{ref:"contents",style:S({position:t.state.isSticky?"fixed":"static",bottom:t.state.isSticky?"0":null,left:t.state.isSticky?"0":null,width:t.state.isSticky?"100%":null,zIndex:t.state.isSticky?"1000":null,transform:"translateZ(0)",transition:"transform 0s"}),class:f([{"is-sticky":t.state.isSticky},t.customClassNames.contents])},[M(l.$slots,"default",{isSticky:t.state.isSticky})],6),h("div",{class:f(t.customClassNames.fake),style:S({display:t.state.isSticky?"block":"none",marginTop:t.state.marginTop,marginBottom:t.state.marginBottom,height:t.state.height})},null,6)],2)}const D=N(P,[["render",R]]);export{D as B};
//# sourceMappingURL=BottomSticky-24c7f421.js.map
