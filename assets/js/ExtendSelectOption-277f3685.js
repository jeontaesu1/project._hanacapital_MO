import{r as I,w as v,a as S,c as A,o as B,E as h,p as b,u as R,z as m,e as x,f as z,g as D,n as k,A as y,x as p,B as N,t as O,k as V,h as j,m as q,j as G,b as J,q as K,l as Q}from"./vendor-ba129e39.js";import{S as W}from"./SelectButton-dcdddf65.js";import{_ as E,U as X}from"./index-cf777a32.js";import{P as Y}from"./PopupTitle-f43042d2.js";import{T as Z}from"./ToastPopup-5e74224e.js";import{T as $}from"./ToastPopupHead-51f456cc.js";const ee="_select_e58ro_1",te="_select__input_e58ro_5",oe="_select__option_e58ro_10",ne={select:ee,select__input:te,select__option:oe},P=()=>({wrap:"",input:""}),le={components:{SelectButton:W,UiLayer:X,PopupTitle:Y,ToastPopup:Z,ToastPopupHead:$},props:{classNames:{Type:Object,default(){return P()}},buttonClassNames:{Type:Object,default:null},defaultValue:{Type:String,default:null},disabled:{Type:Boolean,default:!1},buttonTitle:{Type:String,default:null},layerTitle:{Type:String,default:null},id:{Type:String,default:null},name:{Type:String,default:null},placeholder:{Type:String,default:""},buttonId:{Type:String,default:null},openerFocusToAfterClose:{Type:Boolean,default:!0},onChange:{Type:Function,default(){return()=>{}}},onOptionClick:{Type:Function,default(){return()=>{}}},modelValue:{Type:String}},setup(o,{emit:a}){const e=I({options:[],count:0,value:{value:o.defaultValue||""},text:"",forcePlaceholder:!o.defaultValue}),t=v("formListItem",{}),c=v("inputBlock",{}),i=S(null),u=S(null),n=S(null),f=A(()=>{const{classNames:l}=o;return Object.assign(P(),l)}),_=l=>{const s=e.count;return e.options.push(Object.assign({},l,{key:s})),e.count++,s},C=l=>{const s=e.options.findIndex(r=>r.key===l);e.options.splice(s,1)},d=(l,s)=>{const r=e.options.findIndex(H=>H.key===l);Object.assign(e.options[r],s,{key:l})},T=l=>{e.value.value=l.value,e.text=l.text,e.forcePlaceholder=!1,i.value.close(),G(()=>{const s=new Event("change"),r=new Event("input");n.value.dispatchEvent(s),n.value.dispatchEvent(r),t&&t.checkInputed&&t.checkInputed()})},g=l=>{const s=e.options.findIndex(r=>r.value===l);s>-1&&T(e.options[s])},M=()=>{i.value.open(u.value.button),t&&t.selectFocus&&t.selectFocus(!0),c&&c.selectFocus&&c.selectFocus(!0)},w=()=>{t&&t.selectFocus&&t.selectFocus(!1),c&&c.selectFocus&&c.selectFocus(!1)},L=l=>{a("update:modelValue",l.target.value)},U=l=>{const{onOptionClick:s}=o;s(l)};return B(()=>{g(o.modelValue)}),h(()=>o.modelValue,l=>{g(l)}),b("extendSelectStyleModule",R()),b("extendSelect",{options:e.options,value:e.value,optionsAdd:_,optionsRemove:C,optionsChange:d,selectOption:T,optionClick:U}),{state:e,layer:i,button:u,input:n,customClassNames:f,setValue:g,selectOption:T,layerOpen:M,onAfterClosed:w,onInput:L}}},se=["id","name","disabled","value"];function ae(o,a,e,t,c,i){const u=m("SelectButton"),n=m("PopupTitle"),f=m("ToastPopupHead"),_=m("ToastPopup"),C=m("UiLayer");return x(),z("div",{class:k([o.$style.select,t.customClassNames.wrap])},[D("input",{type:"hidden",ref:"input",class:k([o.$style.select__input,t.customClassNames.input]),id:e.id,name:e.name,disabled:e.disabled,value:t.state.value.value,onChange:a[0]||(a[0]=(...d)=>e.onChange&&e.onChange(...d)),onInput:a[1]||(a[1]=(...d)=>t.onInput&&t.onInput(...d))},null,42,se),y(u,{ref:"button",classNames:e.buttonClassNames,disabled:e.disabled,title:e.buttonTitle,placeholder:e.placeholder,forcePlaceholder:t.state.forcePlaceholder,id:e.buttonId,onClick:t.layerOpen},{default:p(()=>[N(O(t.state.text),1)]),_:1},8,["classNames","disabled","title","placeholder","forcePlaceholder","id","onClick"]),y(C,{ref:"layer",type:"toast",onAfterClosed:t.onAfterClosed,backgroundClose:!0,openerFocusToAfterClose:e.openerFocusToAfterClose},{default:p(d=>[d.display!=="none"?(x(),V(_,{key:0},{head:p(()=>[y(f,null,{default:p(()=>[y(n,null,{default:p(()=>[N(O(e.layerTitle||"선택해 주세요"),1)]),_:1})]),_:1})]),default:p(()=>[j(o.$slots,"default")]),_:3})):q("",!0)]),_:3},8,["onAfterClosed","openerFocusToAfterClose"])],2)}const ce={$style:ne},ve=E(le,[["render",ae],["__cssModules",ce]]),F=()=>({option:""}),ue={inheritAttrs:!1,props:{tagName:{Type:String,default:"button"},classNames:{Type:Object,default(){return F()}},value:{Type:String,default:""},text:{Type:String,default:""},type:{Type:String,default:"button"}},setup(o){const a=v("extendSelectStyleModule"),e=v("extendSelect",{}),t=I({key:null}),c=A(()=>{const{classNames:n}=o;return Object.assign(F(),n)}),i=()=>{const n={value:o.value,text:o.text};e&&e.selectOption&&e.selectOption(n)},u=n=>{const{optionClick:f}=e;f(n)};return B(()=>{const n={value:o.value,text:o.text};e&&e.optionsAdd&&(t.key=e.optionsAdd(n),e.value&&e.value.value&&e.value.value===n.value&&e.selectOption&&e.selectOption(n))}),J(()=>{e&&e.optionsRemove&&e.optionsRemove(t.key)}),h(()=>o.value,n=>{e&&e.optionsChange&&e.optionsChange(t.key,{value:n})}),h(()=>o.text,n=>{e&&e.optionsChange&&e.optionsChange(t.key,{text:n})}),{extendSelect:e,styleModule:a,customClassNames:c,selectOption:i,optionClick:u}}};function ie(o,a,e,t,c,i){return x(),V(Q(e.tagName),K(o.$attrs,{type:e.type,title:t.extendSelect.value&&t.extendSelect.value.value===e.value?"선택 됨":null,class:[t.styleModule.select__option,{"is-selected":t.extendSelect.value&&t.extendSelect.value.value===e.value},t.customClassNames.option],onClick:a[0]||(a[0]=u=>{t.selectOption(),t.optionClick(u)})}),{default:p(()=>[j(o.$slots,"default")]),_:3},16,["type","title","class"])}const _e=E(ue,[["render",ie]]);export{ve as E,_e as a};
//# sourceMappingURL=ExtendSelectOption-277f3685.js.map
