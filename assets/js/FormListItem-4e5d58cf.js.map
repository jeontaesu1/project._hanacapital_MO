{"version":3,"file":"FormListItem-4e5d58cf.js","sources":["../../../../src/components/ui/form/FormListItem.vue"],"sourcesContent":["<script>\nimport {\n  ref,\n  computed,\n  reactive,\n  provide,\n  inject,\n  onBeforeMount,\n  onMounted,\n  onUpdated,\n  watch,\n} from 'vue';\n\nconst defaultClassNames = () => ({\n  item: '',\n  title: '',\n  titleText: '',\n  titleSecondary: '',\n  titleOptionalText: '',\n  require: '',\n  requireText: '',\n  contents: '',\n});\n\nexport default {\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    require: {\n      Type: Boolean,\n      default: false,\n    },\n    forceFocus: {\n      Type: Boolean,\n      default: false,\n    },\n    titleText: {\n      Type: String,\n      default: '',\n    },\n    titleSecondary: {\n      Type: String,\n      default: '',\n    },\n    titleOptionalText: {\n      Type: String,\n      default: null,\n    },\n    target: {\n      Type: String,\n      default: null,\n    },\n    disabled: {\n      Type: Boolean,\n      default: false,\n    },\n    selectOnly: {\n      Type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    const styleModule = inject('formListStyleModule');\n\n    let timer = null;\n\n    const state = reactive({\n      isFocus: false,\n      isSelectFocus: false,\n      isInputed: false,\n      isError: false,\n      selectOnly: {\n        value: false,\n      },\n    });\n\n    const areaClass = styleModule['form__area'];\n\n    const contents = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const checkInputed = () => {\n      const inputs = contents.value.querySelectorAll(\n        `.${areaClass} input:not(.js-ignore):not([type=\"checkbox\"]):not([type=\"radio\"]):not([type=\"button\"]):not([type=\"image\"])`\n      );\n      let isInputed = false;\n\n      for (let i = 0; i < inputs.length; i++) {\n        if (inputs[i].value.length) {\n          isInputed = true;\n          break;\n        }\n      }\n\n      state.isInputed = isInputed;\n    };\n\n    const onfocusin = () => {\n      const { disabled } = props;\n\n      if (disabled) return;\n\n      clearTimeout(timer);\n      state.isFocus = true;\n\n      checkInputed();\n    };\n\n    const onfocusout = () => {\n      const { disabled } = props;\n\n      if (disabled) return;\n\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        state.isFocus = false;\n        clearTimeout(timer);\n      }, 50);\n    };\n\n    const onKeyup = () => {\n      const { disabled } = props;\n\n      if (disabled) return;\n\n      checkInputed();\n    };\n\n    const labelClick = () => {\n      const { target, disabled } = props;\n\n      if (disabled || !target) return;\n\n      const el = contents.value.querySelector(target);\n\n      el.focus();\n\n      if (el.matches('button, a')) {\n        el.click();\n      }\n    };\n\n    const error = (val) => {\n      state.isError = val;\n    };\n\n    const selectFocus = (val) => {\n      state.isSelectFocus = val;\n    };\n\n    onBeforeMount(() => {\n      state.selectOnly.value = props.selectOnly;\n    });\n\n    onMounted(() => {\n      checkInputed();\n    });\n\n    onUpdated(() => {\n      checkInputed();\n    });\n\n    watch(\n      () => props.selectOnly,\n      (cur) => {\n        state.selectOnly.value = cur;\n      }\n    );\n\n    provide('formListItem', {\n      areaClass,\n      onfocusin,\n      onfocusout,\n      error,\n      selectFocus,\n      helpClass: styleModule['form__help'],\n      selectOnly: state.selectOnly,\n      selectTextClass: styleModule['form__select-text'],\n      checkInputed,\n    });\n\n    return {\n      state,\n      styleModule,\n      contents,\n      customClassNames,\n      onfocusin,\n      onfocusout,\n      onKeyup,\n      labelClick,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      styleModule['form__item'],\n      {\n        [styleModule['form__item--focus']]:\n          state.isFocus || state.isSelectFocus,\n        [styleModule['form__item--inputed']]: state.isInputed,\n        [styleModule['form__item--force-focus']]: forceFocus,\n        [styleModule['form__item--error']]: state.isError,\n        [styleModule['form__item--disabled']]: disabled,\n        [styleModule['form__item--select-only']]: selectOnly,\n      },\n      customClassNames.item,\n    ]\"\n  >\n    <dt\n      :class=\"[styleModule['form__title'], customClassNames.title]\"\n      @click=\"labelClick\"\n    >\n      <span\n        :class=\"[styleModule['form__title-text'], customClassNames.titleText]\"\n      >\n        {{ titleText }}\n      </span>\n      <span\n        v-if=\"titleSecondary\"\n        :class=\"[\n          styleModule['form__title-secondary'],\n          customClassNames.titleSecondary,\n        ]\"\n      >\n        {{ titleSecondary }}\n      </span>\n      <span\n        v-if=\"titleOptionalText\"\n        :class=\"[\n          styleModule['form__title-optional'],\n          customClassNames.titleOptionalText,\n        ]\"\n      >\n        {{ titleOptionalText }}\n      </span>\n      <span\n        v-if=\"require\"\n        :class=\"[styleModule['form__require'], customClassNames.require]\"\n      >\n        <span\n          :class=\"[\n            styleModule['form__require-text'],\n            customClassNames.requireText,\n          ]\"\n        >\n          (필수)\n        </span>\n      </span>\n    </dt>\n    <dd\n      ref=\"contents\"\n      :class=\"[styleModule['form__contents'], customClassNames.contents]\"\n      @keyup=\"onKeyup\"\n    >\n      <slot />\n    </dd>\n  </div>\n</template>\n"],"names":["defaultClassNames","_sfc_main","props","styleModule","inject","timer","state","reactive","areaClass","contents","ref","customClassNames","computed","classNames","checkInputed","inputs","isInputed","i","onfocusin","disabled","onfocusout","onKeyup","labelClick","target","el","error","val","selectFocus","onBeforeMount","onMounted","onUpdated","watch","cur","provide","_createElementBlock","_normalizeClass","$setup","$props","_createElementVNode","args","_renderSlot","_ctx"],"mappings":"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"}