{"version":3,"file":"BasicSelect-5f5fa1e6.js","sources":["../../../../src/components/ui/form/BasicSelect.vue"],"sourcesContent":["<script>\nimport {\n  ref,\n  computed,\n  reactive,\n  nextTick,\n  inject,\n  onMounted,\n  watch,\n} from 'vue';\n\nimport SelectButton from '@/components/ui/form/SelectButton.vue';\nimport UiLayer from '@/components/ui/layer/UiLayer.vue';\nimport PopupTitle from '@/components/ui/layer/PopupTitle.vue';\nimport ToastPopup from '@/components/ui/layer/ToastPopup.vue';\nimport ToastPopupHead from '@/components/ui/layer/ToastPopupHead.vue';\n\nimport IconCheck from '@/assets/images/icon/check-l.svg?component';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n  input: '',\n  optionWrap: '',\n  optionList: '',\n  optionItem: '',\n  optionButton: '',\n  optionCheck: '',\n});\nconst defaultOption = () => ({\n  value: '',\n  text: '',\n  disabled: false,\n});\n\nexport default {\n  components: {\n    SelectButton,\n    UiLayer,\n    PopupTitle,\n    ToastPopup,\n    ToastPopupHead,\n    IconCheck,\n  },\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    buttonClassNames: {\n      Type: Object,\n      default: null,\n    },\n    theme: {\n      Type: String,\n      default: null,\n    },\n    option: {\n      Type: Array,\n      default() {\n        return [defaultOption()];\n      },\n    },\n    defaultValue: {\n      Type: String,\n      default: null,\n    },\n    disabled: {\n      Type: Boolean,\n      default: false,\n    },\n    buttonTitle: {\n      Type: String,\n      default: null,\n    },\n    layerTitle: {\n      Type: String,\n      default: null,\n    },\n    id: {\n      Type: String,\n      default: null,\n    },\n    name: {\n      Type: String,\n      default: null,\n    },\n    placeholder: {\n      Type: String,\n      default: '',\n    },\n    buttonId: {\n      Type: String,\n      default: null,\n    },\n    openerFocusToAfterClose: {\n      Type: Boolean,\n      default: true,\n    },\n    onChange: {\n      Type: Function,\n      default() {\n        return () => {};\n      },\n    },\n    onOptionClick: {\n      Type: Function,\n      default() {\n        return () => {};\n      },\n    },\n    modelValue: {\n      Type: String,\n    },\n  },\n  setup(props, { emit }) {\n    const option = props.option.map((item) =>\n      Object.assign(defaultOption(), item)\n    );\n\n    const state = reactive({\n      value: props.defaultValue || '',\n      text:\n        (props.defaultValue &&\n          option.filter((item) => item.value === props.defaultValue)[0].text) ||\n        '',\n      forcePlaceholder: !props.defaultValue,\n    });\n\n    const formListItem = inject('formListItem', {});\n    const inputBlock = inject('inputBlock', {});\n\n    const layer = ref(null);\n    const button = ref(null);\n    const input = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const makeOption = computed(() => {\n      const { option } = props;\n      return option.map((item) => Object.assign(defaultOption(), item));\n    });\n\n    watch(\n      () => props.modelValue,\n      (cur) => {\n        setValue(cur);\n      }\n    );\n\n    const layerOpen = () => {\n      layer.value.open(button.value.button);\n\n      if (formListItem && formListItem.selectFocus) {\n        formListItem.selectFocus(true);\n      }\n      if (inputBlock && inputBlock.selectFocus) {\n        inputBlock.selectFocus(true);\n      }\n    };\n\n    const selectOption = (option) => {\n      state.value = (option && option.value) || '';\n      state.text = (option && option.text) || '';\n      state.forcePlaceholder = !option;\n      layer.value.close();\n\n      nextTick(() => {\n        const eChange = new Event('change');\n        const eInput = new Event('input');\n        input.value.dispatchEvent(eChange);\n        input.value.dispatchEvent(eInput);\n\n        if (formListItem && formListItem.checkInputed) {\n          formListItem.checkInputed();\n        }\n      });\n    };\n\n    const setValue = (value) => {\n      const { option } = props;\n      const makeOption = option.map((item) =>\n        Object.assign(defaultOption(), item)\n      );\n      const filterOption = makeOption.filter((item) => item.value === value);\n\n      if (filterOption.length) {\n        selectOption(filterOption[0]);\n      } else {\n        selectOption(null);\n      }\n    };\n\n    const onAfterClosed = () => {\n      if (formListItem && formListItem.selectFocus) {\n        formListItem.selectFocus(false);\n      }\n      if (inputBlock && inputBlock.selectFocus) {\n        inputBlock.selectFocus(false);\n      }\n    };\n\n    const onInput = (e) => {\n      emit('update:modelValue', e.target.value);\n    };\n\n    const optionClick = (e) => {\n      const { onOptionClick } = props;\n\n      onOptionClick(e);\n    };\n\n    onMounted(() => {\n      setValue(props.modelValue || props.defaultValue);\n    });\n\n    return {\n      state,\n      layer,\n      button,\n      input,\n      customClassNames,\n      makeOption,\n      layerOpen,\n      selectOption,\n      setValue,\n      onAfterClosed,\n      onInput,\n      optionClick,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      $style['select'],\n      {\n        [$style[`select--theme-${theme}`]]: theme,\n      },\n      customClassNames.wrap,\n    ]\"\n  >\n    <input\n      type=\"hidden\"\n      ref=\"input\"\n      :class=\"[$style['select__input'], customClassNames.input]\"\n      :id=\"id\"\n      :name=\"name\"\n      :disabled=\"disabled\"\n      :value=\"state.value\"\n      @change=\"onChange\"\n      @input=\"onInput\"\n    />\n    <SelectButton\n      ref=\"button\"\n      :classNames=\"buttonClassNames\"\n      :disabled=\"disabled\"\n      :title=\"buttonTitle\"\n      :placeholder=\"placeholder\"\n      :forcePlaceholder=\"state.forcePlaceholder\"\n      :id=\"buttonId\"\n      :theme=\"theme\"\n      @click=\"layerOpen\"\n      >{{ state.text }}</SelectButton\n    >\n\n    <UiLayer\n      ref=\"layer\"\n      type=\"toast\"\n      :onAfterClosed=\"onAfterClosed\"\n      :backgroundClose=\"true\"\n      :openerFocusToAfterClose=\"openerFocusToAfterClose\"\n      v-slot=\"layerSlotProps\"\n    >\n      <ToastPopup v-if=\"layerSlotProps.display !== 'none'\">\n        <template v-slot:head>\n          <ToastPopupHead>\n            <PopupTitle>{{ layerTitle || '선택해 주세요' }}</PopupTitle>\n          </ToastPopupHead>\n        </template>\n\n        <div :class=\"[$style['select__option'], customClassNames.optionWrap]\">\n          <ul\n            :class=\"[\n              $style['select__option-list'],\n              customClassNames.optionList,\n            ]\"\n          >\n            <li\n              v-for=\"(item, i) in makeOption\"\n              :key=\"i\"\n              :class=\"[\n                $style['select__option-item'],\n                {\n                  [$style['select__option-item--checked']]:\n                    state.value === item.value,\n                },\n                customClassNames.optionItem,\n              ]\"\n            >\n              <button\n                type=\"button\"\n                :title=\"state.value === item.value ? '선택 됨' : null\"\n                :class=\"[\n                  $style['select__option-button'],\n                  customClassNames.optionButton,\n                ]\"\n                :disabled=\"item.disabled\"\n                @click=\"\n                  (e) => {\n                    selectOption(item);\n                    optionClick(e);\n                  }\n                \"\n              >\n                <template v-for=\"(text, i) in item.text.split(/\\n/)\" :key=\"i\">\n                  <br v-if=\"i > 0\" />{{ text }}\n                </template>\n                <span\n                  :class=\"[\n                    $style['select__option-check'],\n                    customClassNames.optionCheck,\n                  ]\"\n                >\n                  <IconCheck />\n                </span>\n              </button>\n            </li>\n          </ul>\n        </div>\n      </ToastPopup>\n    </UiLayer>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/form/BasicSelect.scss';\n</style>\n"],"names":["defaultClassNames","defaultOption","_sfc_main","SelectButton","UiLayer","PopupTitle","ToastPopup","ToastPopupHead","IconCheck","props","emit","option","item","state","reactive","formListItem","inject","inputBlock","layer","ref","button","input","customClassNames","computed","classNames","makeOption","watch","cur","setValue","layerOpen","selectOption","nextTick","eChange","eInput","value","filterOption","onAfterClosed","onInput","e","optionClick","onOptionClick","onMounted","_createElementBlock","_normalizeClass","_ctx","$props","$setup","_createElementVNode","args","_createVNode","_component_SelectButton","_createTextVNode","_toDisplayString","_component_UiLayer","_withCtx","layerSlotProps","_createBlock","_component_ToastPopup","_component_ToastPopupHead","_component_PopupTitle","_openBlock","_Fragment","_renderList","i","text","_hoisted_3","_component_IconCheck"],"mappings":"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"}