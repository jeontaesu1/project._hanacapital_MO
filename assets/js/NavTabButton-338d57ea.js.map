{"version":3,"file":"NavTabButton-338d57ea.js","sources":["../../../../src/components/ui/tab/NavTab.vue","../../../../src/components/ui/tab/NavTabButton.vue"],"sourcesContent":["<script>\nimport {\n  ref,\n  reactive,\n  computed,\n  useCssModule,\n  provide,\n  onBeforeMount,\n  onMounted,\n  watch,\n} from 'vue';\n\nimport { useUiCommonStore } from '@/stores/ui/common';\n\nimport UiTabList from '@/components/ui/tab/UiTabList.vue';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n  inner: '',\n  scroller: '',\n  list: '',\n});\n\nexport default {\n  components: {\n    UiTabList,\n  },\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    useUiTab: {\n      Type: Boolean,\n      default: false,\n    },\n    scroll: {\n      Type: Boolean,\n      default: false,\n    },\n    auto: {\n      Type: Boolean,\n      default: false,\n    },\n    head: {\n      Type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    const store = {\n      ui: {\n        common: useUiCommonStore(),\n      },\n    };\n\n    const style = useCssModule();\n\n    const state = reactive({\n      useUiTab: {\n        value: null,\n      },\n    });\n\n    const scroller = ref(null);\n    const list = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const setComponent = computed(() => {\n      const { useUiTab } = props;\n      return useUiTab ? UiTabList : 'ul';\n    });\n\n    const scrollbarsWidth = computed(() => {\n      return store.ui.common.scrollbarsWidth;\n    });\n\n    const scrollToActive = () => {\n      const { scroll } = props;\n\n      if (!scroll) return;\n\n      const scrollerEl = scroller.value;\n      const listEl = list.value.el || list.value;\n      const active = (() => {\n        if (list.value.el) {\n          return listEl.getElementsByClassName('is-tab-opened');\n        } else {\n          return listEl.getElementsByClassName(style['nav-tab__item--active']);\n        }\n      })();\n      const margin =\n        listEl.getElementsByClassName(style['nav-tab__item'])[0].offsetLeft -\n        listEl.offsetLeft;\n\n      if (!active.length) return;\n\n      const scrollLeft = active[0].offsetLeft - listEl.offsetLeft - margin;\n\n      scrollerEl.scrollLeft = scrollLeft;\n    };\n\n    onBeforeMount(() => {\n      state.useUiTab.value = props.useUiTab;\n    });\n\n    onMounted(() => {\n      scrollToActive();\n    });\n\n    watch(\n      () => props.useUiTab,\n      (cur) => {\n        state.useUiTab.value = cur;\n      }\n    );\n\n    provide('navTabStyleModule', style);\n    provide('navTab', {\n      useUiTab: state.useUiTab,\n    });\n\n    return {\n      scroller,\n      list,\n      customClassNames,\n      setComponent,\n      scrollbarsWidth,\n      scrollToActive,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      $style['nav-tab'],\n      {\n        [$style['nav-tab--scroll']]: scroll,\n        [$style['nav-tab--auto']]: auto,\n        [$style['nav-tab--head']]: head,\n        [$style['nav-tab--pc']]: scrollbarsWidth > 0,\n      },\n      customClassNames.wrap,\n    ]\"\n  >\n    <div :class=\"[$style['nav-tab__inner'], customClassNames.inner]\">\n      <div\n        ref=\"scroller\"\n        :class=\"[$style['nav-tab__scroller'], customClassNames.scroller]\"\n      >\n        <component\n          :is=\"setComponent\"\n          ref=\"list\"\n          :class=\"[$style['nav-tab__list'], customClassNames.list]\"\n        >\n          <slot />\n        </component>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/tab/NavTab.scss';\n</style>\n","<script>\nimport { computed, inject } from 'vue';\nimport { RouterLink } from 'vue-router';\n\nimport { useUiHeaderStore } from '@/stores/ui/header';\n\nimport UiTabButton from '@/components/ui/tab/UiTabButton.vue';\n\nconst defaultClassNames = () => ({\n  item: '',\n  button: '',\n  text: '',\n});\n\nexport default {\n  inheritAttrs: false,\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    link: {\n      Type: String,\n      default: null,\n    },\n    tagName: {\n      Type: String,\n      default: 'div',\n    },\n    active: {\n      Type: Boolean,\n      default: false,\n    },\n    disabled: {\n      Type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    const styleModule = inject('navTabStyleModule');\n    const navTab = inject('navTab', {});\n    const popupLayout = inject('popupLayout', {});\n    const stickyBar = inject('stickyBar', {});\n\n    const store = {\n      ui: {\n        header: useUiHeaderStore(),\n      },\n    };\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const setItemComponent = computed(() => {\n      const { useUiTab } = navTab;\n      return useUiTab.value ? UiTabButton : 'li';\n    });\n\n    const setButtonComponent = computed(() => {\n      const { useUiTab } = navTab;\n      const { tagName } = props;\n      return useUiTab.value\n        ? 'div'\n        : tagName === 'RouterLink'\n        ? RouterLink\n        : tagName;\n    });\n\n    const itemDisabled = computed(() => {\n      const { useUiTab } = navTab;\n      const { disabled } = props;\n      return (useUiTab.value && disabled) || null;\n    });\n\n    const buttonDisabled = computed(() => {\n      const { useUiTab } = navTab;\n      const { tagName, disabled } = props;\n      return useUiTab.value ? null : tagName === 'button' ? disabled : null;\n    });\n\n    const headerH = computed(() => {\n      const popupHead =\n        popupLayout && popupLayout.head && popupLayout.head.value;\n      const popupHeadH = (() => {\n        if (popupHead) {\n          return popupHead.offsetHeight;\n        } else {\n          return 0;\n        }\n      })();\n\n      return popupHeadH || store.ui.header.height;\n    });\n\n    const buttonClick = () => {\n      const { tagName } = props;\n      const stickyBarEl = stickyBar.getElement ? stickyBar.getElement() : null;\n\n      if (tagName === 'RouterLink' || tagName === 'a' || !stickyBarEl) return;\n\n      const html = document.getElementsByTagName('html')[0];\n      const popupBodyEl = popupLayout.body ? popupLayout.body.value : null;\n      const scrollTop = (() => {\n        if (popupBodyEl) {\n          return popupBodyEl.scrollTop;\n        } else {\n          return html.scrollTop;\n        }\n      })();\n      const offsetTop =\n        scrollTop + stickyBarEl.getBoundingClientRect().top - headerH.value;\n\n      if (scrollTop > offsetTop) {\n        if (popupBodyEl) {\n          popupBodyEl.scrollTop = offsetTop;\n        } else {\n          html.scrollTop = offsetTop;\n        }\n      }\n    };\n\n    return {\n      styleModule,\n      customClassNames,\n      setItemComponent,\n      setButtonComponent,\n      itemDisabled,\n      buttonDisabled,\n      buttonClick,\n    };\n  },\n};\n</script>\n\n<template>\n  <component\n    :is=\"setItemComponent\"\n    :class=\"[\n      styleModule['nav-tab__item'],\n      {\n        [styleModule['nav-tab__item--active']]: active,\n        [styleModule['nav-tab__item--disabled']]: disabled,\n      },\n      customClassNames.item,\n    ]\"\n    :link=\"link\"\n    :disabled=\"itemDisabled\"\n    @click=\"buttonClick\"\n  >\n    <component\n      :is=\"setButtonComponent\"\n      v-bind=\"$attrs\"\n      :class=\"[styleModule['nav-tab__button'], customClassNames.button]\"\n      :title=\"active ? '선택 됨' : null\"\n      :disabled=\"buttonDisabled\"\n    >\n      <span :class=\"[styleModule['nav-tab__text'], customClassNames.text]\">\n        <slot />\n      </span>\n    </component>\n  </component>\n</template>\n"],"names":["defaultClassNames","_sfc_main","UiTabList","props","store","useUiCommonStore","style","useCssModule","state","reactive","scroller","ref","list","customClassNames","computed","classNames","setComponent","useUiTab","scrollbarsWidth","scrollToActive","scroll","scrollerEl","listEl","active","margin","scrollLeft","onBeforeMount","onMounted","watch","cur","provide","_createElementBlock","_normalizeClass","_ctx","$props","$setup","_createElementVNode","_openBlock","_createBlock","_resolveDynamicComponent","_renderSlot","styleModule","inject","navTab","popupLayout","stickyBar","useUiHeaderStore","setItemComponent","UiTabButton","setButtonComponent","tagName","RouterLink","itemDisabled","disabled","buttonDisabled","headerH","popupHead","stickyBarEl","html","popupBodyEl","scrollTop","offsetTop","_mergeProps"],"mappings":"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"}