{"version":3,"file":"AlertSystem-d7fdedfd.js","sources":["../../../../src/components/ui/layer/AlertSystem.vue"],"sourcesContent":["<script>\nimport { reactive, ref, nextTick } from 'vue';\n\nimport BasicButton from '@/components/ui/button/BasicButton.vue';\nimport ButtonList from '@/components/ui/button/ButtonList.vue';\nimport ButtonListItem from '@/components/ui/button/ButtonListItem.vue';\nimport UiLayer from '@/components/ui/layer/UiLayer.vue';\nimport PopupTitle from '@/components/ui/layer/PopupTitle.vue';\nimport PopupText from '@/components/ui/layer/PopupText.vue';\nimport AlertPopup from '@/components/ui/layer/AlertPopup.vue';\n\nconst defaultOptions = () => ({\n  title: '',\n  message: [''],\n  buttons: [{}],\n  speed: null,\n});\nconst defaultButtonsOptions = () => ({\n  text: '확인',\n  theme: null, // secondary, tertiary, quaternary\n  line: false, // true\n  callback: (closeFn) => {\n    closeFn();\n  },\n  closeAfterCallback: () => {},\n});\n\nexport default {\n  components: {\n    BasicButton,\n    UiLayer,\n    PopupTitle,\n    PopupText,\n    AlertPopup,\n    ButtonList,\n    ButtonListItem,\n  },\n  setup() {\n    const initOptions = defaultOptions();\n\n    const state = reactive({\n      title: initOptions.title,\n      message: initOptions.message,\n      buttons: [defaultButtonsOptions()],\n      onAfterClosed: () => {},\n    });\n\n    const layer = ref(null);\n\n    const open = (customOptions) => {\n      const options = Object.assign(defaultOptions(), customOptions);\n      const { title, message, buttons, speed } = options;\n\n      for (let i = 0; i < buttons.length; i++) {\n        buttons[i] = Object.assign(defaultButtonsOptions(), buttons[i]);\n      }\n\n      state.title = title;\n      state.message =\n        typeof message === 'string' ? message.split(/\\n/) : message;\n      state.buttons = buttons;\n\n      layer.value.open(null, speed);\n    };\n\n    const close = (speed) => {\n      layer.value.close(speed);\n    };\n\n    const clear = () => {\n      layer.value.close(0);\n    };\n\n    const buttonClick = (i) => {\n      const { buttons } = state;\n\n      state.onAfterClosed = () => {\n        const resetOptions = defaultOptions();\n\n        buttons[i].closeAfterCallback();\n\n        state.title = resetOptions.title;\n        state.message = resetOptions.message;\n        state.buttons = [defaultButtonsOptions()];\n      };\n\n      nextTick(() => {\n        buttons[i].callback(close);\n      });\n    };\n\n    return {\n      state,\n      layer,\n      open,\n      close,\n      clear,\n      buttonClick,\n    };\n  },\n};\n</script>\n\n<template>\n  <UiLayer ref=\"layer\" :onAfterClosed=\"state.onAfterClosed\">\n    <AlertPopup>\n      <template v-slot:head>\n        <PopupTitle v-if=\"state.title.length\">{{ state.title }}</PopupTitle>\n      </template>\n\n      <PopupText v-if=\"state.message[0].length\">\n        <template v-for=\"(text, i) in state.message\" :key=\"i\">\n          <br v-if=\"i > 0\" />{{ text }}\n        </template>\n      </PopupText>\n\n      <template v-slot:foot>\n        <ButtonList\n          :classNames=\"{\n            wrap: 'row-margin-none',\n          }\"\n        >\n          <ButtonListItem v-for=\"(item, i) in state.buttons\" :key=\"i\">\n            <BasicButton\n              :line=\"item.line\"\n              :theme=\"item.theme\"\n              @click=\"buttonClick(i)\"\n            >\n              {{ item.text }}\n            </BasicButton>\n          </ButtonListItem>\n        </ButtonList>\n      </template>\n    </AlertPopup>\n  </UiLayer>\n</template>\n"],"names":["defaultOptions","defaultButtonsOptions","closeFn","_sfc_main","BasicButton","UiLayer","PopupTitle","PopupText","AlertPopup","ButtonList","ButtonListItem","initOptions","state","reactive","layer","ref","open","customOptions","options","title","message","buttons","speed","i","close","resetOptions","nextTick","_createBlock","_component_UiLayer","$setup","_withCtx","_createVNode","_component_AlertPopup","_openBlock","_component_PopupTitle","_createTextVNode","_toDisplayString","_createCommentVNode","_component_ButtonList","_createElementBlock","_Fragment","_renderList","item","_component_ButtonListItem","_component_BasicButton","$event","_component_PopupText","text","_hoisted_1"],"mappings":"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"}