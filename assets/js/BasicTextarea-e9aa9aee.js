import{u as W,a as K,b as X,r as Y,j as N,F as Z,k as $,l as tt,G as et,w as ot,p as O,J as nt,q as m,s as _,v as f,x as u,C as k,D as y,K as st,H as lt,E as it,y as ut,n as at}from"./vue-cbac8c5d.js";import{_ as rt,u as ct,l as dt}from"./index-436475de.js";import{F as mt}from"./FormInvalidMessage-a9cc39d1.js";const _t="_input_1btkn_1",ft="_input__title_1btkn_4",pt="_input__contents_1btkn_10",yt="_input__input_1btkn_13",bt="_input__bottom_1btkn_88",vt="_input__count_1btkn_96",kt="_input__help_1btkn_107",Ct="_input__invalid_1btkn_107",Tt={input:_t,input__title:ft,input__contents:pt,input__input:yt,"input--focus":"_input--focus_1btkn_80","input--error":"_input--error_1btkn_85",input__bottom:bt,"input__bottom-left":"_input__bottom-left_1btkn_92",input__count:vt,"input__count-current":"_input__count-current_1btkn_104",input__help:kt,input__invalid:Ct,"input--inputed":"_input--inputed_1btkn_110","input--disabled":"_input--disabled_1btkn_116"},E=()=>({item:"",title:"",titleText:"",titleOptionalText:"",require:"",requireText:"",contents:"",input:"",bottom:"",bottomLeft:"",count:"",countCurrent:""}),gt={components:{FormInvalid:mt},inheritAttrs:!1,props:{classNames:{Type:Object,default(){return E()}},require:{Type:Boolean,default:!1},titleText:{Type:String,default:""},titleOptionalText:{Type:String,default:null},disabled:{Type:Boolean,default:!1},count:{Type:Boolean,default:!1},error:{Type:Boolean,default:!1},maxlength:{Type:Number,default:null},scrollFocus:{Type:Boolean,default:!0},defaultValue:{Type:String,default:null},modelValue:{Type:String}},setup(e,s){const{emit:l}=s;let t=null;const a={iosClick:!1,iosFocus:!1,androidFocus:!1,androidClick:!1},C=W(),v=K("formListStyleModule"),n=K("popupLayout",{}),d={ui:{common:ct(),header:dt()}},r=X({isFocus:!1,isInputed:!1,val:"",count:e.modelValue?e.modelValue.length:0}),c=Y(null),V=N(()=>{const{classNames:o}=e;return Object.assign(E(),o)}),x=N(()=>!!s.slots.bottom),H=N(()=>{const o=n&&n.head&&n.head.value;return(()=>o?o.offsetHeight:0)()||d.ui.header.height}),q=()=>c.value,B=()=>{c.value.focus()},j=()=>{B()},p=()=>{const{maxlength:o}=e;if(typeof o!="number")return;const i=c.value.value;if(i.length>o){c.value.value=i.substr(0,o);const I=new Event("input");c.value.dispatchEvent(I)}},T=()=>{const o=c.value.value.length;r.isInputed=!!o,r.count=o},U=()=>{clearTimeout(t),p(),r.isFocus=!0,r.isInputed=!!c.value.value.length,P()},D=()=>{clearTimeout(t),p(),t=setTimeout(()=>{r.isFocus=!1,clearTimeout(t)},50)},z=o=>{const{value:i}=o.target;r.val=i,l("update:modelValue",i)},G=()=>{p()},J=()=>{p(),T()},g=()=>{const{isIos:o,isAndroid:i}=d.ui.common.userAgent,{scrollFocus:I}=e;if(!I||!o&&!i)return;const h=document.getElementsByTagName("html")[0],Q=c.value,b=n.body?n.body.value:null,S=H.value,A=h.scrollTop,F=(()=>b?b.scrollTop+S:A)(),L=(b?F+A:F)+Q.getBoundingClientRect().top-S-80;b?d.ui.common.userAgent.isIos?h.scrollTop=L-F:b.scrollTop=L-S:h.scrollTop=L},P=()=>{d.ui.common.userAgent.isIos?a.iosFocus=!0:d.ui.common.userAgent.isAndroid&&(a.androidFocus=!0,g())},R=()=>{d.ui.common.userAgent.isIos?a.iosClick=!0:d.ui.common.userAgent.isAndroid&&(a.androidClick=!0)},M=()=>{const{iosFocus:o,iosClick:i}=a;d.ui.common.userAgent.isIos&&(o&&!i&&g(),a.iosFocus=!1,a.iosClick=!1)},w=()=>{const{androidFocus:o,androidClick:i}=a;(o||i)&&g(),a.androidFocus=!1};return Z(()=>{r.val=e.modelValue||e.defaultValue||""}),$(()=>{p(),T(),window.addEventListener("keypadOpened",M),window.addEventListener("legacyAndroidKeypadOpened",w)}),tt(()=>{window.removeEventListener("keypadOpened",M),window.removeEventListener("legacyAndroidKeypadOpened",w)}),et(()=>{p()}),ot(()=>e.modelValue,o=>{r.val=o,at(()=>{T()})}),O("formListItem",{helpClass:v.form__help}),O("basicTextarea",{helpClass:C.input__help,invalidClass:C.input__invalid}),{formListStyleModule:v,state:r,input:c,customClassNames:V,isBottom:x,getInputElement:q,focus:B,labelClick:j,onfocusin:U,onInput:z,onKeydown:G,onKeyup:J,onfocusout:D,onInputClick:R}}},It=["value","disabled"],ht={key:0};function St(e,s,l,t,a,C){const v=nt("FormInvalid");return m(),_("div",{class:u([t.formListStyleModule.form__item,{[t.formListStyleModule["form__item--focus"]]:t.state.isFocus,[t.formListStyleModule["form__item--inputed"]]:t.state.isInputed,[t.formListStyleModule["form__item--error"]]:l.error,[t.formListStyleModule["form__item--disabled"]]:l.disabled},e.$style.input,{[e.$style["input--focus"]]:t.state.isFocus,[e.$style["input--inputed"]]:t.state.isInputed,[e.$style["input--error"]]:l.error,[e.$style["input--disabled"]]:l.disabled},t.customClassNames.item])},[f("dt",{class:u([t.formListStyleModule.form__title,e.$style.input__title,t.customClassNames.title]),onClick:s[0]||(s[0]=(...n)=>t.labelClick&&t.labelClick(...n))},[f("span",{class:u([t.formListStyleModule["form__title-text"],t.customClassNames.titleText])},k(l.titleText),3),l.titleOptionalText?(m(),_("span",{key:0,class:u([t.formListStyleModule["form__title-optional"],t.customClassNames.titleOptionalText])},k(l.titleOptionalText),3)):y("",!0),l.require?(m(),_("span",{key:1,class:u([t.formListStyleModule.form__require,t.customClassNames.require])},[f("span",{class:u([t.formListStyleModule["form__require-text"],t.customClassNames.requireText])}," (필수) ",2)],2)):y("",!0)],2),f("dd",{class:u([t.formListStyleModule.form__contents,e.$style.input__contents,t.customClassNames.contents])},[st(v,{error:l.error},{default:lt(()=>[f("div",{class:u([e.$style.input__input,t.customClassNames.input])},[f("textarea",it({ref:"input"},e.$attrs,{value:l.modelValue||t.state.val,disabled:l.disabled,onInput:s[1]||(s[1]=(...n)=>t.onInput&&t.onInput(...n)),onFocusin:s[2]||(s[2]=(...n)=>t.onfocusin&&t.onfocusin(...n)),onFocusout:s[3]||(s[3]=(...n)=>t.onfocusout&&t.onfocusout(...n)),onKeydown:s[4]||(s[4]=(...n)=>t.onKeydown&&t.onKeydown(...n)),onKeyup:s[5]||(s[5]=(...n)=>t.onKeyup&&t.onKeyup(...n)),onClick:s[6]||(s[6]=(...n)=>t.onInputClick&&t.onInputClick(...n))}),null,16,It)],2),t.isBottom||l.count?(m(),_("div",{key:0,class:u([e.$style.input__bottom,t.customClassNames.bottom])},[t.isBottom?(m(),_("div",{key:0,class:u([e.$style["input__bottom-left"],t.customClassNames.bottom])},[ut(e.$slots,"bottom")],2)):y("",!0),l.count?(m(),_("div",{key:1,class:u([e.$style.input__count,t.customClassNames.bottom])},[f("span",{class:u([e.$style["input__count-current"],t.customClassNames.countCurrent])},k(t.state.count),3),l.maxlength?(m(),_("span",ht,"/"+k(l.maxlength),1)):y("",!0)],2)):y("",!0)],2)):y("",!0)]),_:3},8,["error"])],2)],2)}const Ft={$style:Tt},wt=rt(gt,[["render",St],["__cssModules",Ft]]);export{wt as B};
