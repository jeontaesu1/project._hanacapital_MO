import{_ as z,u as N,o as _}from"./index-317ef9b7.js";import{a as x,b,r as p,j as O,k as j,n as H,l as I,q as U,s as V,v as S,y as M,z as h,x as k}from"./vue-cbac8c5d.js";const E=()=>({wrap:"",contents:"",fake:""}),P={props:{classNames:{Type:Object,default(){return E()}}},setup(l){const e=x("pageContents",{}),o={ui:{common:N(),scrollBlock:_()}},t=b({isSticky:!1,marginTop:"0",marginBottom:"0",height:"0"}),d=p(null),a=p(null),B=p(null),C=O(()=>{const{classNames:s}=l;return Object.assign(E(),s)}),L=()=>{const g=a.value.children[0],r=getComputedStyle(g),c=r.getPropertyValue("margin-top"),m=r.getPropertyValue("margin-bottom");t.marginTop=c,t.marginBottom=m},n=()=>{const s=d.value;if(s.offsetHeight<=0)return;const r=a.value.children[0],c=(()=>o.ui.scrollBlock.isBlocking?o.ui.scrollBlock.scrollTop:document.getElementsByTagName("html")[0].scrollTop)(),m=c+s.getBoundingClientRect().top,v=r.offsetHeight,T=window.innerHeight;if(o.ui.common.keypadOpened||c>=m+v-T){t.isSticky&&(t.isSticky=!1);return}t.height=`${v}px`,t.isSticky||(t.isSticky=!0)},u=()=>{n()},i=()=>{n()},f=()=>{n()},w=()=>{n()},y=()=>{n()};return j(()=>{L(),H(()=>{n()}),window.addEventListener("load",f),window.addEventListener("scroll",u),window.addEventListener("resize",i),window.addEventListener("keypadOpened",w),window.addEventListener("keypadClosed",y),e.wrap&&e.wrap.value&&e.wrap.value.addEventListener("resize",i)}),I(()=>{window.removeEventListener("load",f),window.removeEventListener("scroll",u),window.removeEventListener("resize",i),window.removeEventListener("keypadOpened",w),window.removeEventListener("keypadClosed",y),e.wrap&&e.wrap.value&&e.wrap.value.removeEventListener("resize",i)}),{state:t,wrap:d,contents:a,fake:B,customClassNames:C}}};function q(l,e,o,t,d,a){return U(),V("div",{ref:"wrap",class:k(t.customClassNames.wrap)},[S("div",{ref:"contents",style:h({position:t.state.isSticky?"fixed":"static",bottom:t.state.isSticky?"0":null,left:t.state.isSticky?"0":null,width:t.state.isSticky?"100%":null,zIndex:t.state.isSticky?"1000":null,transform:"translateZ(0)",transition:"transform 0s"}),class:k([{"is-sticky":t.state.isSticky},t.customClassNames.contents])},[M(l.$slots,"default",{isSticky:t.state.isSticky})],6),S("div",{class:k(t.customClassNames.fake),style:h({display:t.state.isSticky?"block":"none",marginTop:t.state.marginTop,marginBottom:t.state.marginBottom,height:t.state.height})},null,6)],2)}const D=z(P,[["render",q]]);export{D as B};
