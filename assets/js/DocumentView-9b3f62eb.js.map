{"version":3,"file":"DocumentView-9b3f62eb.js","sources":["../../../../src/components/ui/viewer/DocumentView.vue"],"sourcesContent":["<script>\nimport { ref, computed, reactive, onMounted, onBeforeUnmount } from 'vue';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n  fake: '',\n  origin: '',\n});\n\nexport default {\n  inheritAttrs: false,\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n  },\n  setup(props) {\n    const state = reactive({\n      zoom: 1,\n      height: 0,\n    });\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const fake = ref(null);\n    const origin = ref(null);\n\n    const update = () => {\n      const fakeEl = fake.value;\n      const originEl = origin.value;\n      const fakeW = fakeEl.offsetWidth;\n      const originW = originEl.offsetWidth;\n      const originH = originEl.offsetHeight;\n\n      if (fakeW <= 0 || originW <= 0) return;\n\n      const zoom = ((1 / originW) * fakeW).toFixed(6);\n\n      state.zoom = zoom;\n      state.height = (originH * zoom).toFixed(6);\n    };\n\n    onMounted(() => {\n      update();\n\n      window.addEventListener('load', update);\n      window.addEventListener('resize', update);\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('load', update);\n      window.removeEventListener('resize', update);\n    });\n\n    return {\n      state,\n      customClassNames,\n      fake,\n      origin,\n      update,\n    };\n  },\n};\n</script>\n\n<template>\n  <div :class=\"[$style['viewer'], customClassNames.wrap]\">\n    <div\n      ref=\"fake\"\n      :class=\"[$style['viewer__fake'], customClassNames.fake]\"\n      :style=\"`height: ${state.height}px;`\"\n    ></div>\n    <div\n      ref=\"origin\"\n      :class=\"[$style['viewer__origin'], customClassNames.origin]\"\n      :style=\"`transform: scale(${state.zoom}) translateZ(0);`\"\n    >\n      <slot />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/viewer/DocumentView.scss';\n</style>\n"],"names":["defaultClassNames","_sfc_main","props","state","reactive","customClassNames","computed","classNames","fake","ref","origin","update","fakeEl","originEl","fakeW","originW","originH","zoom","onMounted","onBeforeUnmount","_createElementBlock","_normalizeClass","_ctx","$setup","_createElementVNode","_normalizeStyle","_renderSlot"],"mappings":"oRAGMA,EAAoB,KAAO,CAC/B,KAAM,GACN,KAAM,GACN,OAAQ,EACV,GAEKC,EAAU,CACb,aAAc,GACd,MAAO,CACL,WAAY,CACV,KAAM,OACN,SAAU,CACR,OAAOD,EAAiB,CACzB,CACF,CACF,EACD,MAAME,EAAO,CACX,MAAMC,EAAQC,EAAS,CACrB,KAAM,EACN,OAAQ,CACV,CAAC,EAEKC,EAAmBC,EAAS,IAAM,CACtC,KAAM,CAAE,WAAAC,CAAW,EAAIL,EACvB,OAAO,OAAO,OAAOF,EAAmB,EAAEO,CAAU,CACtD,CAAC,EAEKC,EAAOC,EAAI,IAAI,EACfC,EAASD,EAAI,IAAI,EAEjBE,EAAS,IAAM,CACnB,MAAMC,EAASJ,EAAK,MACdK,EAAWH,EAAO,MAClBI,EAAQF,EAAO,YACfG,EAAUF,EAAS,YACnBG,EAAUH,EAAS,aAEzB,GAAIC,GAAS,GAAKC,GAAW,EAAG,OAEhC,MAAME,GAAS,EAAIF,EAAWD,GAAO,QAAQ,CAAC,EAE9CX,EAAM,KAAOc,EACbd,EAAM,QAAUa,EAAUC,GAAM,QAAQ,CAAC,GAG3C,OAAAC,EAAU,IAAM,CACdP,IAEA,OAAO,iBAAiB,OAAQA,CAAM,EACtC,OAAO,iBAAiB,SAAUA,CAAM,CAC1C,CAAC,EAEDQ,EAAgB,IAAM,CACpB,OAAO,oBAAoB,OAAQR,CAAM,EACzC,OAAO,oBAAoB,SAAUA,CAAM,CAC7C,CAAC,EAEM,CACL,MAAAR,EACA,iBAAAE,EACA,KAAAG,EACA,OAAAE,EACA,OAAAC,EAEH,CACH,qCAIES,EAaM,MAAA,CAbA,MAxERC,EAwEgB,CAAAC,EAAA,OAAkB,OAAAC,EAAA,iBAAiB,IAAI,CAAA,IACnDC,EAIO,MAAA,CAHL,IAAI,OACH,MA3EPH,EA2Ee,CAAAC,EAAA,OAAwB,aAAAC,EAAA,iBAAiB,IAAI,CAAA,EACrD,MA5EPE,EAAA,WA4EyBF,EAAK,MAAC,MAAM,KAAA,WAEjCC,EAMM,MAAA,CALJ,IAAI,SACH,MAhFPH,EAgFe,CAAAC,EAAA,OAA0B,eAAAC,EAAA,iBAAiB,MAAM,CAAA,EACzD,MAjFPE,EAAA,oBAiFkCF,EAAK,MAAC,IAAI,kBAAA,IAEtCG,EAAQJ,EAAA,OAAA,SAAA"}